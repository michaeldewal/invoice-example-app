{"metadata":{"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}},"usedHelpers":[]},"ignored":false,"code":"Meteor.startup(function () {\n    invoices.initialize();\n});\n\ninvoices = new Mongo.Collection(\"invoices\");\ninvoices.byTimeRange = function () {\n    var timeRange = FlowRouter.getParam('type') || 'all';\n    var sortParams = FlowRouter.current().queryParams;\n    var sort = {};\n    for (var k in babelHelpers.sanitizeForInObject(sortParams)) {\n        sort[k.replace('sort', '').firstToType('lower')] = sortParams[k] === 'DESC' ? -1 : 1;\n    }\n\n    var selectedDate = undefined;\n    var today = new Date();\n    switch (timeRange) {\n        case 'today':\n            selectedDate = today;\n            selectedDate.setSeconds(0);\n            selectedDate.setHours(0);\n            selectedDate.setMinutes(0);\n            break;\n        case 'week':\n            selectedDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() - 7);\n            break;\n        case 'month':\n            selectedDate = new Date(today.getFullYear(), today.getMonth() - 1, today.getDate());\n            break;\n        default:\n            selectedDate = false;\n            break;\n    }\n\n    var filter = selectedDate !== false ? { createdAt: { '$gte': selectedDate } } : {};\n\n    Session.set(\"invoiceFilter\", filter);\n    Session.set(\"invoiceSort\", sort);\n};\n\ninvoices.goRoute = function (route) {\n    var param = FlowRouter.getQueryParam(route);\n    var params = FlowRouter.current().queryParams;\n    params[route] = param && param === 'ASC' ? 'DESC' : 'ASC';\n    FlowRouter.go('/:type', FlowRouter.current().params, params);\n    invoices.byTimeRange();\n};\n\ninvoices.initialize = function () {\n    if (!FlowRouter.getParam('type') && FlowRouter.current().params == {}) FlowRouter.setQueryParams({ sortCreatedAt: 'DESC', sortTotal: 'ASC' });\n    invoices.byTimeRange();\n};\n\nTemplate.invoicestemplate.helpers({\n    invoices: function () {\n        var filter = Session.get(\"invoiceFilter\") || {};\n        var sort = Session.get(\"invoiceSort\") || false;\n\n        Meteor.subscribe(\"invoiceCollection\", filter, sort);\n        if (sort) {\n            return invoices.find(filter, { sort: sort });\n        }\n\n        return invoices.find(filter);\n    }\n});\n\nTemplate.registerHelper('formatDate', function (date) {\n    return moment(date).format('DD-MM-YYYY');\n});\n\nTemplate.invoicestemplate.events({\n    'click .today': function () {\n        FlowRouter.go('/today');\n        invoices.byTimeRange();\n    },\n    'click .week': function () {\n        FlowRouter.go('/week');\n        invoices.byTimeRange();\n    },\n    'click .month': function () {\n        FlowRouter.go('/month');\n        invoices.byTimeRange();\n    },\n    'click .all': function () {\n        FlowRouter.go('/');\n        invoices.byTimeRange();\n    },\n    'click .generate': function () {\n        Meteor.call('generateInvoices');\n    },\n    'click .filterInvoiceNr': function () {\n        invoices.goRoute('sortInvoiceNr');\n    },\n    'click .filterTotal': function () {\n        invoices.goRoute('sortTotal');\n    },\n    'click .filterCreatedAt': function () {\n        invoices.goRoute('sortCreatedAt');\n    }\n});","ast":null,"map":{"version":3,"sources":["/client/invoices.js"],"names":[],"mappings":"AAAA,MAAM,CAAC,OAAO,CAAC,YAAU;AACrB,YAAQ,CAAC,UAAU,EAAE,CAAC;CACzB,CAAC,CAAC;;AAEH,QAAQ,GAAG,IAAI,KAAK,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;AAC5C,QAAQ,CAAC,WAAW,GAAG,YAAW;AAC9B,QAAM,SAAS,GAAG,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC;AACvD,QAAM,UAAU,GAAG,UAAU,CAAC,OAAO,EAAE,CAAC,WAAW,CAAC;AACpD,QAAM,IAAI,GAAG,EAAE,CAAC;AAChB,SAAK,IAAI,CAAC,qCAAI,UAAU,GAAE;AACtB,YAAI,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,GAAG,AAAC,UAAU,CAAC,CAAC,CAAC,KAAK,MAAM,GAAE,CAAC,CAAC,GAAC,CAAC,CAAC;KACtF;;AAED,QAAI,YAAY,YAAA,CAAC;AACjB,QAAM,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;AACzB,YAAO,SAAS;AACZ,aAAK,OAAO;AACR,wBAAY,GAAG,KAAK,CAAC;AACrB,wBAAY,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AAC3B,wBAAY,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AACzB,wBAAY,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AAC3B,kBAAM;AAAA,AACV,aAAK,MAAM;AACP,wBAAY,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,KAAK,CAAC,QAAQ,EAAE,EAAE,KAAK,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;AACpF,kBAAM;AAAA,AACV,aAAK,OAAO;AACR,wBAAY,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,KAAK,CAAC,QAAQ,EAAE,GAAG,CAAC,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;AACpF,kBAAM;AAAA,AACV;AACI,wBAAY,GAAG,KAAK,CAAC;AACrB,kBAAM;AAAA,KACb;;AAED,QAAM,MAAM,GAAG,AAAC,YAAY,KAAK,KAAK,GAAE,EAAE,SAAS,EAAE,EAAE,MAAM,EAAE,YAAY,EAAE,EAAC,GAAC,EAAE,CAAC;;AAElF,WAAO,CAAC,GAAG,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC;AACrC,WAAO,CAAC,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;CACpC,CAAC;;AAEF,QAAQ,CAAC,OAAO,GAAG,UAAS,KAAK,EAAE;AAC/B,QAAM,KAAK,GAAG,UAAU,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AAC9C,QAAM,MAAM,GAAG,UAAU,CAAC,OAAO,EAAE,CAAC,WAAW,CAAC;AAChD,UAAM,CAAC,KAAK,CAAC,GAAG,AAAC,KAAK,IAAI,KAAK,KAAK,KAAK,GAAE,MAAM,GAAC,KAAK,CAAC;AACxD,cAAU,CAAC,EAAE,CAAC,QAAQ,EAAE,UAAU,CAAC,OAAO,EAAE,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;AAC7D,YAAQ,CAAC,WAAW,EAAE,CAAC;CAC1B,CAAC;;AAEF,QAAQ,CAAC,UAAU,GAAG,YAAW;AAC7B,QAAG,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,UAAU,CAAC,OAAO,EAAE,CAAC,MAAM,IAAI,EAAE,EAChE,UAAU,CAAC,cAAc,CAAC,EAAC,aAAa,EAAE,MAAM,EAAE,SAAS,EAAE,KAAK,EAAC,CAAC,CAAC;AACzE,YAAQ,CAAC,WAAW,EAAE,CAAC;CAC1B,CAAC;;AAEF,QAAQ,CAAC,gBAAgB,CAAC,OAAO,CAAC;AAC9B,YAAQ,EAAE,YAAW;AACjB,YAAM,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,EAAE,CAAC;AAClD,YAAM,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC;;AAEjD,cAAM,CAAC,SAAS,CAAC,mBAAmB,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;AACpD,YAAG,IAAI,EAAE;AACL,mBAAO,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,EAAC,IAAI,EAAE,IAAI,EAAC,CAAC,CAAC;SAC9C;;AAED,eAAO,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAChC;CACJ,CAAC,CAAC;;AAEH,QAAQ,CAAC,cAAc,CAAC,YAAY,EAAE,UAAS,IAAI,EAAE;AACjD,WAAO,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;CAC5C,CAAC,CAAC;;AAEH,QAAQ,CAAC,gBAAgB,CAAC,MAAM,CAAC;AAC7B,kBAAc,EAAE,YAAW;AACvB,kBAAU,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;AACxB,gBAAQ,CAAC,WAAW,EAAE,CAAC;KAC1B;AACD,iBAAa,EAAE,YAAW;AACtB,kBAAU,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;AACvB,gBAAQ,CAAC,WAAW,EAAE,CAAC;KAC1B;AACD,kBAAc,EAAE,YAAW;AACvB,kBAAU,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;AACxB,gBAAQ,CAAC,WAAW,EAAE,CAAC;KAC1B;AACD,gBAAY,EAAE,YAAW;AACrB,kBAAU,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;AACnB,gBAAQ,CAAC,WAAW,EAAE,CAAC;KAC1B;AACD,qBAAiB,EAAE,YAAW;AAC1B,cAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;KACnC;AACD,4BAAwB,EAAE,YAAW;AACjC,gBAAQ,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;KACrC;AACD,wBAAoB,EAAE,YAAW;AAC7B,gBAAQ,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;KACjC;AACD,4BAAwB,EAAE,YAAW;AACjC,gBAAQ,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;KACrC;CACJ,CAAC,CAAC","file":"/client/invoices.js.map","sourcesContent":["Meteor.startup(function(){\r\n    invoices.initialize();\r\n});\r\n\r\ninvoices = new Mongo.Collection(\"invoices\");\r\ninvoices.byTimeRange = function() {\r\n    const timeRange = FlowRouter.getParam('type') || 'all';\r\n    const sortParams = FlowRouter.current().queryParams;\r\n    const sort = {};\r\n    for (let k in sortParams) {\r\n        sort[k.replace('sort', '').firstToType('lower')] = (sortParams[k] === 'DESC')?-1:1;\r\n    }\r\n\r\n    let selectedDate;\r\n    const today = new Date();\r\n    switch(timeRange) {\r\n        case 'today':\r\n            selectedDate = today;\r\n            selectedDate.setSeconds(0);\r\n            selectedDate.setHours(0);\r\n            selectedDate.setMinutes(0);\r\n            break;\r\n        case 'week':\r\n            selectedDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() - 7);\r\n            break;\r\n        case 'month':\r\n            selectedDate = new Date(today.getFullYear(), today.getMonth() - 1, today.getDate());\r\n            break;\r\n        default:\r\n            selectedDate = false;\r\n            break;\r\n    }\r\n\r\n    const filter = (selectedDate !== false)?{ createdAt: { '$gte': selectedDate }}:{};\r\n\r\n    Session.set(\"invoiceFilter\", filter);\r\n    Session.set(\"invoiceSort\", sort);\r\n};\r\n\r\ninvoices.goRoute = function(route) {\r\n    const param = FlowRouter.getQueryParam(route);\r\n    const params = FlowRouter.current().queryParams;\r\n    params[route] = (param && param === 'ASC')?'DESC':'ASC';\r\n    FlowRouter.go('/:type', FlowRouter.current().params, params);\r\n    invoices.byTimeRange();\r\n};\r\n\r\ninvoices.initialize = function() {\r\n    if(!FlowRouter.getParam('type') && FlowRouter.current().params == {})\r\n        FlowRouter.setQueryParams({sortCreatedAt: 'DESC', sortTotal: 'ASC'});\r\n    invoices.byTimeRange();\r\n};\r\n\r\nTemplate.invoicestemplate.helpers({\r\n    invoices: function() {\r\n        const filter = Session.get(\"invoiceFilter\") || {};\r\n        const sort = Session.get(\"invoiceSort\") || false;\r\n\r\n        Meteor.subscribe(\"invoiceCollection\", filter, sort);\r\n        if(sort) {\r\n            return invoices.find(filter, {sort: sort});\r\n        }\r\n\r\n        return invoices.find(filter);\r\n    }\r\n});\r\n\r\nTemplate.registerHelper('formatDate', function(date) {\r\n    return moment(date).format('DD-MM-YYYY');\r\n});\r\n\r\nTemplate.invoicestemplate.events({\r\n    'click .today': function() {\r\n        FlowRouter.go('/today');\r\n        invoices.byTimeRange();\r\n    },\r\n    'click .week': function() {\r\n        FlowRouter.go('/week');\r\n        invoices.byTimeRange();\r\n    },\r\n    'click .month': function() {\r\n        FlowRouter.go('/month');\r\n        invoices.byTimeRange();\r\n    },\r\n    'click .all': function() {\r\n        FlowRouter.go('/');\r\n        invoices.byTimeRange();\r\n    },\r\n    'click .generate': function() {\r\n        Meteor.call('generateInvoices');\r\n    },\r\n    'click .filterInvoiceNr': function() {\r\n        invoices.goRoute('sortInvoiceNr');\r\n    },\r\n    'click .filterTotal': function() {\r\n        invoices.goRoute('sortTotal');\r\n    },\r\n    'click .filterCreatedAt': function() {\r\n        invoices.goRoute('sortCreatedAt');\r\n    }\r\n});"]},"hash":"75ac18cb2b3753db76e4cedf13548d2f9641160d"}
